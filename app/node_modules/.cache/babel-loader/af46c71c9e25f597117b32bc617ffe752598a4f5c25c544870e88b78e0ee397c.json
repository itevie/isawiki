{"ast":null,"code":"var _jsxFileName = \"/home/isabella/Documents/projects/go/isawiki/app/src/dawn-ui/components/ContextMenuManager.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport Button from \"./Button\";\nimport Column from \"./Column\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let showContextMenu = () => {};\nexport default function ContextMenuManager() {\n  _s();\n  const [contextMenu, setContextMenu] = useState(null);\n  const ref = useRef(null);\n  const [xy, setXy] = useState([0, 0]);\n  useEffect(() => {\n    document.addEventListener(\"click\", event => {\n      if (event.target instanceof HTMLInputElement) {\n        return;\n      }\n      setContextMenu(null);\n    });\n    showContextMenu = cm => {\n      cm.event.preventDefault();\n      setContextMenu(cm);\n      setTimeout(() => {\n        var _ref$current;\n        let bounds = (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.getBoundingClientRect();\n        if (!bounds) return;\n        let x = cm.event.pageX;\n        let y = cm.event.pageY;\n        if (x > window.innerWidth - bounds.width) x = window.innerWidth - bounds.width;\n        if (y > window.innerHeight - bounds.height) y = window.innerHeight - bounds.height;\n        setXy([x, y]);\n      }, 10);\n    };\n  }, []);\n  return contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    className: \"dawn-context-menu\",\n    style: {\n      left: `${xy[0]}px`,\n      top: `${xy[1]}px`\n    },\n    children: /*#__PURE__*/_jsxDEV(Column, {\n      util: [\"no-gap\"],\n      children: contextMenu.elements.map(e => e.type === \"button\" ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => e.onClick(),\n        type: \"inherit\",\n        className: `dawn-context-menu-button dawn-context-menu-button-${e.scheme}`,\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: e.scheme && `dawn-color-${e.scheme}`,\n          children: e.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 7\n  }, this);\n}\n_s(ContextMenuManager, \"t+uo7qGYiraB8hr6OPFOM5tOsEs=\");\n_c = ContextMenuManager;\nvar _c;\n$RefreshReg$(_c, \"ContextMenuManager\");","map":{"version":3,"names":["useEffect","useRef","useState","Button","Column","jsxDEV","_jsxDEV","showContextMenu","ContextMenuManager","_s","contextMenu","setContextMenu","ref","xy","setXy","document","addEventListener","event","target","HTMLInputElement","cm","preventDefault","setTimeout","_ref$current","bounds","current","getBoundingClientRect","x","pageX","y","pageY","window","innerWidth","width","innerHeight","height","className","style","left","top","children","util","elements","map","e","type","onClick","scheme","label","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/isabella/Documents/projects/go/isawiki/app/src/dawn-ui/components/ContextMenuManager.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport Button, { ButtonType } from \"./Button\";\nimport Column from \"./Column\";\n\nexport interface ContextMenu {\n  event: React.MouseEvent<any, MouseEvent>;\n  elements: ContextMenuItem[];\n}\n\nexport interface ContextMenuItemBase {\n  type: \"button\" | \"seperator\";\n}\n\nexport interface ContextButtonItem extends ContextMenuItemBase {\n  type: \"button\";\n  label: string;\n\n  disabled?: boolean;\n  scheme?: ButtonType;\n\n  onClick: () => void;\n}\n\nexport interface ContextSeperatorItem extends ContextMenuItemBase {\n  type: \"seperator\";\n}\n\nexport type ContextMenuItem = ContextButtonItem | ContextSeperatorItem;\n\nexport let showContextMenu: (cm: ContextMenu) => void = () => {};\n\nexport default function ContextMenuManager() {\n  const [contextMenu, setContextMenu] = useState<ContextMenu | null>(null);\n  const ref = useRef<HTMLDivElement>(null);\n  const [xy, setXy] = useState<[number, number]>([0, 0]);\n\n  useEffect(() => {\n    document.addEventListener(\"click\", (event) => {\n      if (event.target instanceof HTMLInputElement) {\n        return;\n      }\n      setContextMenu(null);\n    });\n\n    showContextMenu = (cm) => {\n      cm.event.preventDefault();\n      setContextMenu(cm);\n      setTimeout(() => {\n        let bounds = ref.current?.getBoundingClientRect();\n        if (!bounds) return;\n\n        let x = cm.event.pageX;\n        let y = cm.event.pageY;\n\n        if (x > window.innerWidth - bounds.width)\n          x = window.innerWidth - bounds.width;\n\n        if (y > window.innerHeight - bounds.height)\n          y = window.innerHeight - bounds.height;\n\n        setXy([x, y]);\n      }, 10);\n    };\n  }, []);\n\n  return (\n    contextMenu && (\n      <div\n        ref={ref}\n        className=\"dawn-context-menu\"\n        style={{\n          left: `${xy[0]}px`,\n          top: `${xy[1]}px`,\n        }}\n      >\n        <Column util={[\"no-gap\"]}>\n          {contextMenu.elements.map((e) =>\n            e.type === \"button\" ? (\n              <Button\n                onClick={() => e.onClick()}\n                type=\"inherit\"\n                className={`dawn-context-menu-button dawn-context-menu-button-${e.scheme}`}\n              >\n                <label className={e.scheme && `dawn-color-${e.scheme}`}>\n                  {e.label}\n                </label>\n              </Button>\n            ) : (\n              <hr />\n            )\n          )}\n        </Column>\n      </div>\n    )\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}